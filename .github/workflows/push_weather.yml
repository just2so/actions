name: Weather Notification

on:
  schedule:
    - cron: '0 7 * * *'  # 每天早上7点执行，UTC时间
  workflow_dispatch:  # 支持手动触发工作流

jobs:
  send_weather:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Run weather script
        run: |
          chmod +x weather_push.sh  # 赋予执行权限
          ./weather_push.sh  # 执行脚本
        env:
          APP_ID: ${{ secrets.APP_ID }}  # 从 GitHub Secrets 获取 APP_ID
          APP_SECRET: ${{ secrets.APP_SECRET }}  # 从 GitHub Secrets 获取 APP_SECRET
          OPEN_ID: ${{ secrets.OPEN_ID }}  # 从 GitHub Secrets 获取 OPEN_ID
          TEMPLATE_ID: ${{ secrets.TEMPLATE_ID }}  # 从 GitHub Secrets 获取 TEMPLATE_ID
